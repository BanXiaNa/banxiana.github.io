import{_ as i,c as a,o as l,aj as n}from"./chunks/framework.iQ8U7nGd.js";const g=JSON.parse('{"title":"日志","description":"","frontmatter":{},"headers":[],"relativePath":"pages/Documents/SQL/16：日志.md","filePath":"pages/Documents/SQL/16：日志.md","lastUpdated":1770833529000}'),e={name:"pages/Documents/SQL/16：日志.md"};function h(t,s,p,k,E,r){return l(),a("div",null,[...s[0]||(s[0]=[n(`<h1 id="日志" tabindex="-1">日志 <a class="header-anchor" href="#日志" aria-label="Permalink to “日志”">​</a></h1><h2 id="错误日志" tabindex="-1">错误日志 <a class="header-anchor" href="#错误日志" aria-label="Permalink to “错误日志”">​</a></h2><p>见名知义，错误日志存放的是数据库在开始，结束，运行过程中出现错误时，记录相关信息的日志，如果数据库出现错误，停止运行，崩溃，建议首先查看错误日志。</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># 存放目录：</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">var</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/log/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">mysqlld</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">log</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># 查看指令：</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">show variables </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">like</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;%log_error%&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># 查看之后，log_error之后记录的是错误日志的路径</span></span></code></pre></div><hr><h2 id="二进制日志" tabindex="-1">二进制日志 <a class="header-anchor" href="#二进制日志" aria-label="Permalink to “二进制日志”">​</a></h2><p>二进制日志记录了所有的DDL，DML语句，不包括查询语句， 简单来说，包含的就是对库表的修改，元数据的修改，数据内容的修改 在MySQL8.x版本，二进制日志默认开启</p><h4 id="作用" tabindex="-1">作用： <a class="header-anchor" href="#作用" aria-label="Permalink to “作用：”">​</a></h4><p>1：灾难的数据恢复 2：主从复制</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># 查看二进制日志参数\\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">show variables </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">like</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;%log_bin%&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># log_bin 是否开启</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># log_bin_basename 文件位置，文件名</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># log_bin_index 日志索引文件</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">...</span></span></code></pre></div><h4 id="格式" tabindex="-1">格式 <a class="header-anchor" href="#格式" aria-label="Permalink to “格式”">​</a></h4><p>二进制日志可以有多种记录方式：<img src="https://banxia-log.oss-cn-beijing.aliyuncs.com/MySQL/%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%97%A5%E5%BF%97%E7%9A%84%E6%A0%BC%E5%BC%8F.png" alt=""></p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># 查询参数方式</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">show variables </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">like</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;%binlog_format%&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p><img src="https://banxia-log.oss-cn-beijing.aliyuncs.com/MySQL/%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%97%A5%E5%BF%97%E6%9F%A5%E7%9C%8B%E6%96%B9%E5%BC%8F.png" alt=""></p><p>那么问题就来了：二进制日志太多，时间线太长，怎么办：我们可以删除</p><p><img src="https://banxia-log.oss-cn-beijing.aliyuncs.com/MySQL/%E5%88%A0%E9%99%A4%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%97%A5%E5%BF%97%E6%96%B9%E5%BC%8F.png" alt=""></p><hr><h2 id="查询日志" tabindex="-1">查询日志 <a class="header-anchor" href="#查询日志" aria-label="Permalink to “查询日志”">​</a></h2><p>二进制日志中包含的是DML和DDL语句，查询日志包含所有的语句 由于记录语句太多，查询语句一般不默认开启，要手动开启</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># 查看参数</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">show variables </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">like</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;%general%&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p>开启方法：<img src="https://banxia-log.oss-cn-beijing.aliyuncs.com/MySQL/%E6%9F%A5%E8%AF%A2%E6%97%A5%E5%BF%97%E5%BC%80%E5%90%AF%E6%96%B9%E6%B3%95.png" alt=""></p><hr><h2 id="慢查询日志" tabindex="-1">慢查询日志 <a class="header-anchor" href="#慢查询日志" aria-label="Permalink to “慢查询日志”">​</a></h2><p>之前了解过，指的是记录那些超过预定耗时的语句，所以叫慢查询日志。默认不开启</p><p>开启：<img src="https://banxia-log.oss-cn-beijing.aliyuncs.com/MySQL/%E6%85%A2%E6%9F%A5%E8%AF%A2%E6%97%A5%E5%BF%97%E5%BC%80%E5%90%AF%E6%96%B9%E6%B3%95.png" alt=""></p><p>默认情况下，慢查询日志不会记录管理语句，也不会记录不使用索引的语句，但是可以开启：<img src="https://banxia-log.oss-cn-beijing.aliyuncs.com/MySQL/%E5%A6%82%E4%BD%95%E6%9B%B4%E6%94%B9%E6%85%A2%E6%9F%A5%E8%AF%A2%E6%97%A5%E5%BF%97%E7%9A%84%E8%AE%B0%E5%BD%95%E8%A7%84%E5%88%99.png" alt=""></p><h1 id="" tabindex="-1"><a class="header-anchor" href="#" aria-label="Permalink to “”">​</a></h1>`,27)])])}const o=i(e,[["render",h]]);export{g as __pageData,o as default};
