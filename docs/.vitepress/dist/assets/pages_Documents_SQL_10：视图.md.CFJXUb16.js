import{_ as e,c as s,o as i,aj as n}from"./chunks/framework.iQ8U7nGd.js";const g=JSON.parse('{"title":"视图","description":"","frontmatter":{},"headers":[],"relativePath":"pages/Documents/SQL/10：视图.md","filePath":"pages/Documents/SQL/10：视图.md","lastUpdated":1770663692000}'),t={name:"pages/Documents/SQL/10：视图.md"};function l(r,a,h,o,c,p){return i(),s("div",null,[...a[0]||(a[0]=[n(`<h1 id="视图" tabindex="-1">视图 <a class="header-anchor" href="#视图" aria-label="Permalink to “视图”">​</a></h1><p>视图作为表存在于数据库，但是并不存储数据，而是存储查询逻辑，每次调用视图的时候，就执行一遍这个封装好的逻辑。</p><h2 id="创建视图" tabindex="-1">创建视图 <a class="header-anchor" href="#创建视图" aria-label="Permalink to “创建视图”">​</a></h2><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>create [or replace] view view_name as select...;</span></span></code></pre></div><p><strong>or replace</strong>：如果这个视图存在就更新</p><hr><h2 id="查询创建语句" tabindex="-1">查询创建语句 <a class="header-anchor" href="#查询创建语句" aria-label="Permalink to “查询创建语句”">​</a></h2><div class="language-MySQL"><button title="Copy Code" class="copy"></button><span class="lang">MySQL</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>show create view view_name;</span></span></code></pre></div><hr><h2 id="查询视图" tabindex="-1">查询视图 <a class="header-anchor" href="#查询视图" aria-label="Permalink to “查询视图”">​</a></h2><p>视图在数据库中是作为表出现的，因此查询操作和查询表的语句相同</p><hr><h2 id="修改视图" tabindex="-1">修改视图 <a class="header-anchor" href="#修改视图" aria-label="Permalink to “修改视图”">​</a></h2><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span># 方法一：</span></span>
<span class="line"><span>create or replace view view_name as select ...;</span></span>
<span class="line"><span># 方法二</span></span>
<span class="line"><span>alter view view_name as select...;</span></span></code></pre></div><hr><h2 id="删除视图" tabindex="-1">删除视图 <a class="header-anchor" href="#删除视图" aria-label="Permalink to “删除视图”">​</a></h2><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>drop view [if exists] view_name [,vire_name];</span></span></code></pre></div><hr><h2 id="检查选项" tabindex="-1">检查选项 <a class="header-anchor" href="#检查选项" aria-label="Permalink to “检查选项”">​</a></h2><p>视图是以表的形式呈现的，，那自然也可以进行增删改查，当然，视图存储的是逻辑，如果加入了数据，会加入到基表，而不是视图，如果添加了视图查询不到的条目，就会出现问题。 为了解决问题，就诞生了检查选项用来检查操作是否合法</p><h3 id="添加检查选项" tabindex="-1">添加检查选项 <a class="header-anchor" href="#添加检查选项" aria-label="Permalink to “添加检查选项”">​</a></h3><p>在创建视图语句之后加上 with [cascade | local] check option 视图就会检查更新，阻止不符合视图创建规范的SQL执行。 另外，MySQL允许根据视图创建视图，因此，检查范围成了问题。为了确定检查的范围，mysql加入了两个范围限定 <strong>cascade</strong>：级联，如果在子视图加入了这个条件，通过子视图更新基表的操作会检查父视图的规范。 <strong>local</strong>：局部检查，如果父视图没有定义条件，就不检查</p><hr><h2 id="视图的更新" tabindex="-1">视图的更新 <a class="header-anchor" href="#视图的更新" aria-label="Permalink to “视图的更新”">​</a></h2><p>视图可以更新基表的条件：视图的数据必须是和基表是一对一对应的关系，如果数据经过了函数加工，就不能通过视图更新基表</p><p>例如：聚合函数，筛选函数，分组，等函数</p><hr><h2 id="视图作用" tabindex="-1">视图作用 <a class="header-anchor" href="#视图作用" aria-label="Permalink to “视图作用”">​</a></h2><p>这个玩意有什么用呢？：</p><p><strong>简单</strong>：简化操作，对于复杂度语句，使用频次比较高的语句都适合转化为视图去呈现。 <strong>安全</strong>：可以只对用户授予视图权限，使得用户只能看到视图所展示的数据，可以保护数据 <strong>数据独立</strong>：屏蔽基表的变化对视图的影响（可以取别名，只查看某些字段）</p><hr><h1 id="" tabindex="-1"><a class="header-anchor" href="#" aria-label="Permalink to “”">​</a></h1>`,32)])])}const b=e(t,[["render",l]]);export{g as __pageData,b as default};
